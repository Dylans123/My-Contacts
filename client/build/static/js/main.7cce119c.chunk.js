(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),l=a.n(r),c=a(18),s=a(12),i=a(21),u=a(22),m=a(13),d=a(23),h=a(34),g=a(6),p=a(28),f=a(71),b=a.n(f),C=a(167),E=a(182),v=a(122),O=a(162),j=a(80),w=a(4),y=a(72),S=a.n(y),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",redirectTo:null,errorText:""},a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.email,n=t.password,o=this.props._login;console.log("handleSubmit"),o(a,n)}},{key:"render",value:function(){var e=this.state,t=e.redirectTo,a=e.email,n=e.password,r=this.props,l=r.classes,c=r.errorText;return console.log(c),t?o.a.createElement(h.a,{to:{pathname:t}}):o.a.createElement("div",{className:l.root},o.a.createElement(O.a,{container:!0,component:v.a,elevation:6,square:!0,className:l.gridContainer,spacing:10},o.a.createElement(O.a,{item:!0,xl:4,lg:5,md:5,sm:6,className:l.paper},o.a.createElement(j.a,{component:"h1",variant:"h4"},"Welcome!"),o.a.createElement("form",{className:l.form,xs:12,noValidate:!0,onSubmit:this.onSubmit},o.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:a,autoComplete:"email",autoFocus:!0,onChange:this.handleChange}),o.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:n,autoComplete:"current-password",onChange:this.handleChange}),o.a.createElement("div",{id:"loginMsg",style:{color:"crimson"}}),o.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,disableElevation:!0},"Sign In"),o.a.createElement(O.a,{item:!0},o.a.createElement(p.b,{to:"/register"},"Don't have an account? Sign Up")))),o.a.createElement(b.a,{query:"(min-device-width: 600px)"},o.a.createElement(O.a,{item:!0,xl:8,lg:7,md:7,sm:6,component:v.a,className:l.image}))))}}]),t}(n.Component),x=Object(w.a)((function(e){var t;return{root:{display:"flex",direction:"column",justifyContent:"center",alignItems:"center",height:"100vh"},gridContainer:(t={width:"60%",height:"60%"},Object(g.a)(t,e.breakpoints.up("xs"),{height:"55%",width:"90%"}),Object(g.a)(t,e.breakpoints.up("sm"),{height:"50%",width:"80%"}),Object(g.a)(t,e.breakpoints.up("md"),{height:"60%",width:"70%"}),Object(g.a)(t,e.breakpoints.up("lg"),{height:"60%",width:"65%"}),t),image:{backgroundImage:"url(".concat(S.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"#FFFFFF",backgroundSize:"60% 60%",backgroundPosition:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(100)},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(N),_=a(27),k=a.n(_),I=a(168),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,o=t.password;console.log(n),console.log(o),console.log("Username: "+n),console.log("Password: "+o),e.preventDefault(),k.a.post("/auth/register",{username:n,password:o}).then((function(e){if(console.log(e),e.data.error){var t=e.data.error;a.setState({errorText:t})}else console.log("youre good"),a.setState({redirectTo:"/login"})})).catch((function(e){console.log(e)})),console.log("username: "+n)},a.state={email:"",password:"",redirectTo:null,errorText:""},a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.redirectTo,a=e.errorText,n=this.props.classes;return t?o.a.createElement(h.a,{to:{pathname:t}}):o.a.createElement("div",{className:n.root},o.a.createElement(I.a,{component:v.a,elevation:6,square:!0,className:n.paper},o.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign Up"),o.a.createElement("div",{style:{color:"crimson"}},a),o.a.createElement("form",{className:n.form,onSubmit:this.onSubmit},o.a.createElement(O.a,{container:!0,spacing:2},o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.handleChange})),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange}))),o.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,disableElevation:!0},"Sign Up"),o.a.createElement(O.a,{container:!0,justify:"flex-start"},o.a.createElement(O.a,{item:!0},o.a.createElement(p.b,{to:"/login"},"Already have an account? Sign In"))))))}}]),t}(n.Component),D=Object(w.a)((function(e){var t;return{root:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},paper:(t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"40%"},Object(g.a)(t,e.breakpoints.up("xs"),{width:"90%"}),Object(g.a)(t,e.breakpoints.up("sm"),{width:"60%"}),Object(g.a)(t,e.breakpoints.up("md"),{width:"40%"}),Object(g.a)(t,e.breakpoints.up("lg"),{width:"25%"}),t),avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(T),A=a(36),W=a.n(A),F=a(177),M=a(176),L=a(179),U=a(170),q=a(178),P=a(169),z=a(171),R=a(78),H=a.n(R),V=a(77),B=a.n(V),J=a(186),G=a(175),K=a(172),Q=a(173),X=a(174),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleCreateContact=function(){(0,a.props.handleCreate)({contacts:[{first_name:a.state.first_name,last_name:a.state.last_name,phone_number:a.state.phone_number,email:a.state.email}]}),a.setState({updatingContact:!1,open:!1,first_name:"",last_name:"",phone_number:"",email:""})},a.updateName=function(e){var t=e.target.value;a.setState({name:t})},a.handleUpdateContact=function(){var e=a.props.handleUpdate,t=a.state.currentContactID;e({contacts:{first_name:a.state.currentContactFirstName,last_name:a.state.currentContactLastName,phone_number:a.state.currentContactPhoneNumber,email:a.state.currentContactEmail}},t),a.handleClose(),a.setState({updatingContact:!1})},a.handleChange=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(g.a)({},n,o),(function(){return console.log(a.state)}))},a.handleOnInputChange=function(e){(0,a.props.handleSearch)(e.target.value)},a.handleModalOpen=function(){a.setState({open:!0})},a.handleOpenEditModal=function(e){console.log(e),a.setState({updatingContact:!0,open:!0,currentContactID:e.contacts._id,currentContactFirstName:e.contacts.first_name,currentContactLastName:e.contacts.last_name,currentContactPhoneNumber:e.contacts.phone_number,currentContactEmail:e.contacts.email},(function(){return console.log(a.state)}))},a.handleClose=function(){a.setState({first_name:"",last_name:"",phone_number:"",email:"",open:!1},(function(){return a.setState({updatingContact:!1})}))},a.contactList=function(){console.log(a.state.contacts);var e=a.props,t=e.contacts,n=e.handleDelete,r=e.classes;if(t.length>0)return t.map((function(e,t){return o.a.createElement(P.a,{key:t},o.a.createElement(U.a,{className:r.tablecell}," ",e.contacts.first_name," "),o.a.createElement(U.a,{className:r.tablecell}," ",e.contacts.last_name," "),o.a.createElement(U.a,{className:r.tablecell}," ",e.contacts.phone_number," "),o.a.createElement(U.a,{className:r.tablecell}," ",e.contacts.email," "),o.a.createElement(U.a,{align:"right"},o.a.createElement(z.a,{"aria-label":"edit",onClick:function(){return a.handleOpenEditModal(e)}},o.a.createElement(B.a,null)),o.a.createElement(z.a,{"aria-label":"delete",onClick:function(){return n(e.contacts._id)}},o.a.createElement(H.a,null))))}))},a.state={search:"",results:{},loading:!1,message:"",name:"",userID:a.props.user._id,open:!1,first_name:"",last_name:"",phone_number:"",email:"",updatingContact:!1,currentContactID:"",currentContactFirstName:"",currentContactLastName:"",currentContactPhoneNumber:"",currentContactEmail:"",dialogFullWidth:!0,dialogMaxWidth:"sm"},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.props,r=n.classes,l=(n.handleCreate,n.contacts),c=this.state.open;return console.log(l),o.a.createElement("div",null,o.a.createElement(O.a,{container:!0,spacing:3,className:r.gridContainer},o.a.createElement(O.a,{item:!0,xl:7,lg:7,md:7,sm:7,xs:7},o.a.createElement(E.a,{fullWidth:!0,id:"outlined-search",label:"Search field",type:"search",variant:"outlined",name:"search",onChange:this.handleOnInputChange})),o.a.createElement(O.a,{item:!0,xl:2,lg:2,md:2,sm:2,xs:2,style:{marginRight:50}},o.a.createElement(C.a,{variant:"contained",size:"large",color:"primary",onClick:this.handleModalOpen},"Create Contact"))),o.a.createElement("div",null,o.a.createElement(J.a,{fullWidth:this.state.dialogFullWidth,maxWidth:this.state.dialogMaxWidth,open:c,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},o.a.createElement(K.a,{id:"form-dialog-title"}," ",this.state.updatingContact?"Edit Contact":"New Contact"),o.a.createElement(Q.a,{classes:{root:r.DialogContent}},o.a.createElement(X.a,null,o.a.createElement(E.a,{variant:"outlined",required:!0,id:"first-name",label:"First Name",name:this.state.updatingContact?"currentContactFirstName":"first_name",defaultValue:this.state.updatingContact?this.state.currentContactFirstName:"",className:r.modalInput,onChange:function(e){return a.handleChange(e)}})),o.a.createElement(X.a,null,o.a.createElement(E.a,(e={variant:"outlined",required:!0,fullWidth:!0,id:"last-name",label:"Last Name",name:"last_name"},Object(g.a)(e,"name",this.state.updatingContact?"currentContactLastName":"last_name"),Object(g.a)(e,"defaultValue",this.state.updatingContact?this.state.currentContactLastName:""),Object(g.a)(e,"className",r.modalInput),Object(g.a)(e,"onChange",(function(e){return a.handleChange(e)})),e))),o.a.createElement(X.a,null,o.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"phone-number",label:"Phone Number",name:this.state.updatingContact?"currentContactPhoneNumber":"phone_number",defaultValue:this.state.updatingContact?this.state.currentContactPhoneNumber:"",className:r.modalInput,onChange:function(e){return a.handleChange(e)}})),o.a.createElement(X.a,null,o.a.createElement(E.a,(t={variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email"},Object(g.a)(t,"name",this.state.updatingContact?"currentContactEmail":"email"),Object(g.a)(t,"autoComplete","email"),Object(g.a)(t,"defaultValue",this.state.updatingContact?this.state.currentContactEmail:""),Object(g.a)(t,"className",r.modalInput),Object(g.a)(t,"onChange",(function(e){return a.handleChange(e)})),t)))),o.a.createElement(G.a,null,o.a.createElement(C.a,{onClick:this.handleClose,color:"primary"},"Cancel"),this.state.updatingContact?o.a.createElement(C.a,{onClick:function(){return a.handleUpdateContact()},type:"submit",color:"primary"},"Save Contact"):o.a.createElement(C.a,{onClick:function(){return a.handleCreateContact()},type:"submit",color:"primary"},"Add New Contact")))),o.a.createElement(M.a,{className:r.tableContainer},o.a.createElement(F.a,{"aria-label":"sticky table",stickyHeader:!0},o.a.createElement(q.a,null,o.a.createElement(P.a,null,o.a.createElement(U.a,{className:r.tablehead},"First Name"),o.a.createElement(U.a,{className:r.tablehead},"Last Name"),o.a.createElement(U.a,{className:r.tablehead},"Phone Number"),o.a.createElement(U.a,{className:r.tablehead},"Email"))),o.a.createElement(L.a,null,this.contactList()))))}}]),t}(n.Component),Z=Object(w.a)((function(e){return{tablehead:{fontSize:"20pt",borderBottom:"none",width:350},tablecell:{fontSize:"13pt"},gridContainer:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30},tableContainer:{height:800,width:"100%",overflow:"auto"},modalInput:{width:"100%"}}}),{withTheme:!0})(Y),$=a(180),ee=a(181),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={name:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props._logout,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement($.a,{position:"static"},o.a.createElement(ee.a,null,o.a.createElement(j.a,{variant:"h6",className:t.title},"My Contacts"),o.a.createElement(C.a,{color:"inherit",onClick:e},"Logout"))))}}]),t}(n.Component),ae=Object(w.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}),{withTheme:!0})(te),ne=a(185),oe=a(79),re=a.n(oe),le=k.a.create({baseURL:"/api"}),ce={getContact:function(e,t){return le.get("/showAll/".concat(e),t)},addContact:function(e,t){return le.post("/add/".concat(e),t)},deleteContact:function(e,t,a){return le.get("/delete/".concat(e,"/").concat(t),a)},searchContact:function(e,t,a){return le.get("/search/".concat(e,"/").concat(t),a)},updateContact:function(e,t,a){return le.post("/update/".concat(e,"/").concat(t),a)}},se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleCreate=function(e){var t,n;return W.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.user,n=t._id,o.next=4,W.a.awrap(ce.addContact(n,e).then((function(e){a.handleOpenAlert("Contact has been created"),a.getContacts()})));case 4:case"end":return o.stop()}}))},a.handleUpdate=function(e,t){var n,o;return W.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=a.state.user,o=n._id,console.log("userID: "+o),console.log("payload: "+JSON.stringify(e)),console.log("contactID "+t),r.next=7,W.a.awrap(ce.updateContact(o,t,e).then((function(e){a.handleOpenAlert("Contact updated successfully"),a.getContacts()})));case 7:case"end":return r.stop()}}))},a.handleDelete=function(e){var t,n;return W.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.user,n=t._id,console.log("/delete/"+n+"/"+e),o.next=5,W.a.awrap(ce.deleteContact(n,e).then((function(e){console.log(e),a.getContacts(),a.handleOpenAlert("Contact has been deleted")})));case 5:case"end":return o.stop()}}))},a.handleSearch=function(e){var t,n;return W.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t=a.state.user,n=t._id,/\S/.test(e)?(console.log("Searching: "+e),ce.searchContact(n,e).then((function(e){console.log("Search results"),console.log(e.data),a.setState({contacts:e.data})}))):a.getContacts();case 3:case"end":return o.stop()}}))},a.handleCloseAlert=function(e,t){"clickaway"!==t&&a.setState({openAlert:!1})},a.handleOpenAlert=function(e){a.setState({openAlert:!0,alertMsg:e})},a.state={user:null,loggedIn:!1,contacts:[],openAlert:!1,alertMsg:""},a._logout=a._logout.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"_logout",value:function(e){var t=this;e.preventDefault(),console.log("logging out"),k.a.post("/auth/logout").then((function(e){console.log(e.data),200===e.status&&(t.setState({loggedIn:!1,user:null}),window.location.href="/login")}))}},{key:"componentDidMount",value:function(){var e=this;k.a.get("/auth/user").then((function(t){console.log(t.data),t.data.user?(console.log("THERE IS A USER"),e.setState({loggedIn:!0,user:t.data.user}),e.getContacts()):(e.setState({loggedIn:!1,user:null}),window.location.href="/login")}))}},{key:"getContacts",value:function(){var e=this,t=this.state.user._id;ce.getContact(t).then((function(t){console.log(t),console.log(t.data.success),console.log(t.data.results),t.data.success&&e.setState({name:"",contacts:t.data.results}),t.data.errmsg?console.log("Error fetching data"):console.log("Data fetched")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.contacts,n=e.openAlert,r=e.alertMsg,l=this.props.classes;return console.log(null===t),t?o.a.createElement("div",{className:l.root},o.a.createElement(ae,{_logout:this._logout}),o.a.createElement(I.a,{maxWidth:"xl"},o.a.createElement(O.a,{container:!0,className:l.paper,direction:"row",justify:"center",alignItems:"center",spacing:5}),o.a.createElement(O.a,{item:!0,className:l.table},o.a.createElement(Z,{user:t,contacts:a,handleSearch:this.handleSearch,handleCreate:this.handleCreate,handleDelete:this.handleDelete,handleUpdate:this.handleUpdate}))),o.a.createElement(ne.a,{open:n,autoHideDuration:3e3,onClose:this.handleCloseAlert,anchorOrigin:{vertical:"top",horizontal:"center"},message:r,action:o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.handleCloseAlert},o.a.createElement(re.a,{fontSize:"small"})))})):null}}]),t}(n.Component),ie=Object(w.a)((function(e){return{root:{height:"100vh"},paper:{marginTop:20},table:{marginTop:40}}}),{withTheme:!0})(se),ue=a(187),me=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={loggedIn:!1,user:null,redirectTo:null,errorText:""},e._login=e._login.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("/auth/user").then((function(t){console.log(t.data),t.data.user?(console.log("THERE IS A USER"),e.setState({loggedIn:!0,user:t.data.user})):e.setState({loggedIn:!1,user:null})})).catch((function(e){console.log(e)}))}},{key:"_login",value:function(e,t){var a=this;console.log("login"),k.a.post("/auth/login",{username:e,password:t}).then((function(e){console.log(e),200===e.status&&(a.setState({loggedIn:!0,user:e.data.user}),window.location.href="/")})).catch((function(e){console.log(e);var t="Login failed, please try again!";console.log(t),a.setState({errorText:t}),document.getElementById("loginMsg").innerHTML=t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.errorText;return o.a.createElement("div",null,o.a.createElement(ue.a,null),o.a.createElement(h.b,{exact:!0,path:"/",render:function(){return o.a.createElement(ie,{user:a})}}),o.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return o.a.createElement(x,{_login:e._login,errorText:n})}}),o.a.createElement(h.b,{exact:!0,path:"/register",render:function(){return o.a.createElement(D,null)}}))}}]),t}(n.Component);l.a.render(o.a.createElement(p.a,null,o.a.createElement(me,null)),document.getElementById("root"))},72:function(e,t,a){e.exports=a.p+"static/media/handshake.774fd7d1.png"},91:function(e,t,a){e.exports=a(121)}},[[91,1,2]]]);
//# sourceMappingURL=main.7cce119c.chunk.js.map