(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),l=a.n(o),c=a(18),s=a(12),i=a(21),u=a(22),m=a(13),d=a(23),h=a(36),g=a(6),p=a(30),b=a(73),f=a.n(b),C=a(191),E=a(207),v=a(129),O=a(186),j=a(82),y=a(4),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",redirectTo:null,errorText:""},a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.email,n=t.password,r=this.props._login;console.log("handleSubmit"),r(a,n)}},{key:"render",value:function(){var e=this.state,t=e.redirectTo,a=e.email,n=e.password,o=this.props,l=o.classes,c=o.errorText;return console.log(c),t?r.a.createElement(h.a,{to:{pathname:t}}):r.a.createElement("div",{className:l.root},r.a.createElement(O.a,{container:!0,component:v.a,elevation:6,square:!0,className:l.gridContainer,spacing:10},r.a.createElement(O.a,{item:!0,xl:4,lg:5,md:5,sm:6,className:l.paper},r.a.createElement(j.a,{component:"h1",variant:"h4"},"Welcome!"),r.a.createElement("form",{className:l.form,xs:12,noValidate:!0,onSubmit:this.onSubmit},r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:a,autoComplete:"email",autoFocus:!0,onChange:this.handleChange}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:n,autoComplete:"current-password",onChange:this.handleChange}),r.a.createElement("div",{id:"loginMsg",style:{color:"crimson"}}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,disableElevation:!0},"Sign In"),r.a.createElement(O.a,{item:!0},r.a.createElement(p.b,{to:"/register"},"Don't have an account? Sign Up")))),r.a.createElement(f.a,{query:"(min-device-width: 600px)"},r.a.createElement(O.a,{item:!0,xl:8,lg:7,md:7,sm:6,component:v.a,className:l.image}))))}}]),t}(n.Component),S=Object(y.a)((function(e){var t;return{root:{display:"flex",direction:"column",justifyContent:"center",alignItems:"center",height:"100vh"},gridContainer:(t={width:"60%",height:"60%"},Object(g.a)(t,e.breakpoints.up("xs"),{height:"55%",width:"90%"}),Object(g.a)(t,e.breakpoints.up("sm"),{height:"50%",width:"80%"}),Object(g.a)(t,e.breakpoints.up("md"),{height:"60%",width:"70%"}),Object(g.a)(t,e.breakpoints.up("lg"),{height:"60%",width:"65%"}),t),image:{backgroundImage:"url(https://source.unsplash.com/featured/?business)",backgroundRepeat:"no-repeat",backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(100)},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(w),N=a(28),x=a.n(N),_=a(192),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;console.log(n),console.log(r),console.log("Username: "+n),console.log("Password: "+r),e.preventDefault(),x.a.post("/auth/register",{username:n,password:r}).then((function(e){if(console.log(e),e.data.error){var t=e.data.error;a.setState({errorText:t})}else console.log("youre good"),a.setState({redirectTo:"/login"})})).catch((function(e){console.log(e)})),console.log("username: "+n)},a.state={email:"",password:"",redirectTo:null,errorText:""},a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.redirectTo,a=e.errorText,n=this.props.classes;return t?r.a.createElement(h.a,{to:{pathname:t}}):r.a.createElement("div",{className:n.root},r.a.createElement(_.a,{component:v.a,elevation:6,square:!0,className:n.paper},r.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("div",{style:{color:"crimson"}},a),r.a.createElement("form",{className:n.form,onSubmit:this.onSubmit},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.handleChange})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange}))),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,disableElevation:!0},"Sign Up"),r.a.createElement(O.a,{container:!0,justify:"flex-start"},r.a.createElement(O.a,{item:!0},r.a.createElement(p.b,{to:"/login"},"Already have an account? Sign In"))))))}}]),t}(n.Component),I=Object(y.a)((function(e){var t;return{root:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},paper:(t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"40%"},Object(g.a)(t,e.breakpoints.up("xs"),{width:"90%"}),Object(g.a)(t,e.breakpoints.up("sm"),{width:"60%"}),Object(g.a)(t,e.breakpoints.up("md"),{width:"40%"}),Object(g.a)(t,e.breakpoints.up("lg"),{width:"25%"}),t),avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(k),T=a(38),D=a.n(T),A=a(201),W=a(200),M=a(203),L=a(194),U=a(202),q=a(193),P=a(195),F=a(79),R=a.n(F),B=a(78),z=a.n(B),H=a(210),V=a(199),J=a(196),G=a(197),K=a(198),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleCreateContact=function(){(0,a.props.handleCreate)({contacts:[{first_name:a.state.first_name,last_name:a.state.last_name,phone_number:a.state.phone_number,email:a.state.email}]}),a.setState({updatingContact:!1,open:!1,first_name:"",last_name:"",phone_number:"",email:""})},a.updateName=function(e){var t=e.target.value;a.setState({name:t})},a.handleUpdateContact=function(){var e=a.props.handleUpdate,t=a.state.currentContactID;e({contacts:{first_name:a.state.currentContactFirstName,last_name:a.state.currentContactLastName,phone_number:a.state.currentContactPhoneNumber,email:a.state.currentContactEmail}},t),a.handleClose(),a.setState({updatingContact:!1})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r),(function(){return console.log(a.state)}))},a.handleOnInputChange=function(e){(0,a.props.handleSearch)(e.target.value)},a.handleModalOpen=function(){a.setState({open:!0})},a.handleOpenEditModal=function(e){console.log(e),a.setState({updatingContact:!0,open:!0,currentContactID:e.contacts._id,currentContactFirstName:e.contacts.first_name,currentContactLastName:e.contacts.last_name,currentContactPhoneNumber:e.contacts.phone_number,currentContactEmail:e.contacts.email},(function(){return console.log(a.state)}))},a.handleClose=function(){a.setState({first_name:"",last_name:"",phone_number:"",email:"",open:!1},(function(){return a.setState({updatingContact:!1})}))},a.contactList=function(){console.log(a.state.contacts);var e=a.props,t=e.contacts,n=e.handleDelete,o=e.classes;if(t.length>0)return t.map((function(e,t){return r.a.createElement(q.a,{key:t},r.a.createElement(L.a,{className:o.tablecell}," ",e.contacts.first_name," "),r.a.createElement(L.a,{className:o.tablecell}," ",e.contacts.last_name," "),r.a.createElement(L.a,{className:o.tablecell}," ",e.contacts.phone_number," "),r.a.createElement(L.a,{className:o.tablecell}," ",e.contacts.email," "),r.a.createElement(L.a,{align:"right"},r.a.createElement(P.a,{"aria-label":"edit",onClick:function(){return a.handleOpenEditModal(e)}},r.a.createElement(z.a,null)),r.a.createElement(P.a,{"aria-label":"delete",onClick:function(){return n(e.contacts._id)}},r.a.createElement(R.a,null))))}))},a.state={search:"",results:{},loading:!1,message:"",name:"",userID:a.props.user._id,open:!1,first_name:"",last_name:"",phone_number:"",email:"",updatingContact:!1,currentContactID:"",currentContactFirstName:"",currentContactLastName:"",currentContactPhoneNumber:"",currentContactEmail:"",dialogFullWidth:!0,dialogMaxWidth:"sm"},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.props,o=n.classes,l=(n.handleCreate,n.contacts),c=this.state.open;return console.log(l),r.a.createElement("div",null,r.a.createElement(O.a,{container:!0,spacing:3,className:o.gridContainer},r.a.createElement(O.a,{item:!0,xl:7,lg:7,md:7,sm:7,xs:7},r.a.createElement(E.a,{fullWidth:!0,id:"outlined-search",label:"Search field",type:"search",variant:"outlined",name:"search",onChange:this.handleOnInputChange})),r.a.createElement(O.a,{item:!0,xl:2,lg:2,md:2,sm:2,xs:2,style:{marginRight:50}},r.a.createElement(C.a,{variant:"contained",size:"large",color:"primary",onClick:this.handleModalOpen},"Create Contact"))),r.a.createElement("div",null,r.a.createElement(H.a,{fullWidth:this.state.dialogFullWidth,maxWidth:this.state.dialogMaxWidth,open:c,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(J.a,{id:"form-dialog-title"}," ",this.state.updatingContact?"Edit Contact":"New Contact"),r.a.createElement(G.a,{classes:{root:o.DialogContent}},r.a.createElement(K.a,null,r.a.createElement(E.a,{variant:"outlined",required:!0,id:"first-name",label:"First Name",name:this.state.updatingContact?"currentContactFirstName":"first_name",defaultValue:this.state.updatingContact?this.state.currentContactFirstName:"",className:o.modalInput,onChange:function(e){return a.handleChange(e)}})),r.a.createElement(K.a,null,r.a.createElement(E.a,(e={variant:"outlined",required:!0,fullWidth:!0,id:"last-name",label:"Last Name",name:"last_name"},Object(g.a)(e,"name",this.state.updatingContact?"currentContactLastName":"last_name"),Object(g.a)(e,"defaultValue",this.state.updatingContact?this.state.currentContactLastName:""),Object(g.a)(e,"className",o.modalInput),Object(g.a)(e,"onChange",(function(e){return a.handleChange(e)})),e))),r.a.createElement(K.a,null,r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"phone-number",label:"Phone Number",name:this.state.updatingContact?"currentContactPhoneNumber":"phone_number",defaultValue:this.state.updatingContact?this.state.currentContactPhoneNumber:"",className:o.modalInput,onChange:function(e){return a.handleChange(e)}})),r.a.createElement(K.a,null,r.a.createElement(E.a,(t={variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email"},Object(g.a)(t,"name",this.state.updatingContact?"currentContactEmail":"email"),Object(g.a)(t,"autoComplete","email"),Object(g.a)(t,"defaultValue",this.state.updatingContact?this.state.currentContactEmail:""),Object(g.a)(t,"className",o.modalInput),Object(g.a)(t,"onChange",(function(e){return a.handleChange(e)})),t)))),r.a.createElement(V.a,null,r.a.createElement(C.a,{onClick:this.handleClose,color:"primary"},"Cancel"),this.state.updatingContact?r.a.createElement(C.a,{onClick:function(){return a.handleUpdateContact()},type:"submit",color:"primary"},"Save Contact"):r.a.createElement(C.a,{onClick:function(){return a.handleCreateContact()},type:"submit",color:"primary"},"Add New Contact")))),r.a.createElement(W.a,{className:o.tableContainer},r.a.createElement(A.a,{"aria-label":"sticky table",stickyHeader:!0},r.a.createElement(U.a,null,r.a.createElement(q.a,null,r.a.createElement(L.a,{className:o.tablehead},"First Name"),r.a.createElement(L.a,{className:o.tablehead},"Last Name"),r.a.createElement(L.a,{className:o.tablehead},"Phone Number"),r.a.createElement(L.a,{className:o.tablehead},"Email"),r.a.createElement(L.a,null))),r.a.createElement(M.a,null,this.contactList()))))}}]),t}(n.Component),X=Object(y.a)((function(e){return{tablehead:{fontSize:"20pt",borderBottom:"none",width:350},tablecell:{fontSize:"13pt"},gridContainer:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:30},tableContainer:{height:800,width:"100%",overflow:"auto"},modalInput:{width:"100%"}}}),{withTheme:!0})(Q),Y=a(204),Z=a(205),$=a(80),ee=a.n($),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={name:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props._logout,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{position:"static"},r.a.createElement(Z.a,null,r.a.createElement(P.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(ee.a,null)),r.a.createElement(j.a,{variant:"h6",className:t.title}),r.a.createElement(C.a,{color:"inherit",onClick:e},"Logout"))))}}]),t}(n.Component),ae=Object(y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),{withTheme:!0})(te),ne=a(211),re=a(206),oe=x.a.create({baseURL:"/api"}),le={getContact:function(e,t){return oe.get("/showAll/".concat(e),t)},addContact:function(e,t){return oe.post("/add/".concat(e),t)},deleteContact:function(e,t,a){return oe.get("/delete/".concat(e,"/").concat(t),a)},searchContact:function(e,t,a){return oe.get("/search/".concat(e,"/").concat(t),a)},updateContact:function(e,t,a){return oe.post("/update/".concat(e,"/").concat(t),a)}},ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleCreate=function(e){var t,n;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.state.user,n=t._id,r.next=4,D.a.awrap(le.addContact(n,e).then((function(e){a.handleOpenAlert("Contact has been created"),a.getContacts()})));case 4:case"end":return r.stop()}}))},a.handleUpdate=function(e,t){var n,r;return D.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=a.state.user,r=n._id,console.log("userID: "+r),console.log("payload: "+JSON.stringify(e)),console.log("contactID "+t),o.next=7,D.a.awrap(le.updateContact(r,t,e).then((function(e){a.handleOpenAlert("Contact updated successfully"),a.getContacts()})));case 7:case"end":return o.stop()}}))},a.handleDelete=function(e){var t,n;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.state.user,n=t._id,console.log("/delete/"+n+"/"+e),r.next=5,D.a.awrap(le.deleteContact(n,e).then((function(e){console.log(e),a.getContacts(),a.handleOpenAlert("Contact has been deleted")})));case 5:case"end":return r.stop()}}))},a.handleSearch=function(e){var t,n;return D.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=a.state.user,n=t._id,/\S/.test(e)?(console.log("Searching: "+e),le.searchContact(n,e).then((function(e){console.log("Search results"),console.log(e.data),a.setState({contacts:e.data})}))):a.getContacts();case 3:case"end":return r.stop()}}))},a.handleCloseAlert=function(e,t){"clickaway"!==t&&a.setState({openAlert:!1})},a.handleOpenAlert=function(e){a.setState({openAlert:!0,alertMsg:e})},a.state={user:null,loggedIn:!1,contacts:[],openAlert:!1,alertMsg:""},a._logout=a._logout.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"_logout",value:function(e){var t=this;e.preventDefault(),console.log("logging out"),x.a.post("/auth/logout").then((function(e){console.log(e.data),200===e.status&&(t.setState({loggedIn:!1,user:null}),window.location.href="/login")}))}},{key:"componentDidMount",value:function(){var e=this;x.a.get("/auth/user").then((function(t){console.log(t.data),t.data.user?(console.log("THERE IS A USER"),e.setState({loggedIn:!0,user:t.data.user}),e.getContacts()):(e.setState({loggedIn:!1,user:null}),window.location.href="/login")}))}},{key:"getContacts",value:function(){var e=this,t=this.state.user._id;le.getContact(t).then((function(t){console.log(t),console.log(t.data.success),console.log(t.data.results),t.data.success&&e.setState({name:"",contacts:t.data.results}),t.data.errmsg?console.log("Error fetching data"):console.log("Data fetched")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.contacts,n=e.openAlert,o=e.alertMsg,l=this.props.classes;return console.log(null===t),t?r.a.createElement("div",{className:l.root},r.a.createElement(ae,{_logout:this._logout}),r.a.createElement(_.a,{maxWidth:"xl"},r.a.createElement(O.a,{container:!0,className:l.paper,direction:"row",justify:"center",alignItems:"center",spacing:5}),r.a.createElement(O.a,{item:!0,className:l.table},r.a.createElement(X,{user:t,contacts:a,handleSearch:this.handleSearch,handleCreate:this.handleCreate,handleDelete:this.handleDelete,handleUpdate:this.handleUpdate}))),r.a.createElement(ne.a,{open:n,autoHideDuration:3e3,onClose:this.handleCloseAlert,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(re.a,{severity:"success",onClose:this.handleCloseAlert,variant:"filled",elevation:6},o))):null}}]),t}(n.Component),se=Object(y.a)((function(e){return{root:{height:"100vh"},paper:{marginTop:20},table:{marginTop:40}}}),{withTheme:!0})(ce),ie=a(212),ue=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={loggedIn:!1,user:null,redirectTo:null,errorText:""},e._login=e._login.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.a.get("/auth/user").then((function(t){console.log(t.data),t.data.user?(console.log("THERE IS A USER"),e.setState({loggedIn:!0,user:t.data.user})):e.setState({loggedIn:!1,user:null})})).catch((function(e){console.log(e)}))}},{key:"_login",value:function(e,t){var a=this;console.log("login"),x.a.post("/auth/login",{username:e,password:t}).then((function(e){console.log(e),200===e.status&&(a.setState({loggedIn:!0,user:e.data.user}),window.location.href="/")})).catch((function(e){console.log(e);var t="Login failed, please try again!";console.log(t),a.setState({errorText:t}),document.getElementById("loginMsg").innerHTML=t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.errorText;return r.a.createElement("div",null,r.a.createElement(ie.a,null),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(se,{user:a})}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(S,{_login:e._login,errorText:n})}}),r.a.createElement(h.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(I,null)}}))}}]),t}(n.Component);l.a.render(r.a.createElement(p.a,null,r.a.createElement(ue,null)),document.getElementById("root"))},94:function(e,t,a){e.exports=a(128)}},[[94,1,2]]]);
//# sourceMappingURL=main.52ef8c6e.chunk.js.map